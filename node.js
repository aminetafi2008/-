qrcode = require('qrcode-terminal');
const { Client, LocalAuth, MessageMedia } = require('whatsapp-web.js');const fs = require('fs');
const path = require('path');
const client = new Client({
    authStrategy: new LocalAuth({ clientId: "whatsapp-bot" }),
    puppeteer: {
        executablePath: '/nix/store/x205pbkd5xh5g4iv0g58xjla55has3cx-chromium-108.0.5359.94/bin/chromium',
        args: [
            '--no-sandbox',
            '--disable-setuid-sandbox',
            '--disable-dev-shm-usage',
            '--disable-gpu'
        ]
    }
});
// Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
const userStates = {};
// Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
const content = {
    "Ø¬Ø¯Ø¹ Ù…Ø´ØªØ±Ùƒ": {
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ© ", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙ„Ø³ÙØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        }
    },
    
    "Ø£ÙˆÙ„Ù‰ Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§": {
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø¬Ù…ÙŠØ¹ Ø¯Ø±ÙˆØ³ Ø§Ø³Ù„Ø§Ù…ÙŠØ©", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙ„Ø³ÙØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        }
    },
    "Ø«Ø§Ù†ÙŠØ© Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§": {
        "Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        },
        "Ø§Ù„ÙÙ„Ø³ÙØ©": { 
            "Ø¯Ø±ÙˆØ³": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"], 
            "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"], 
            "ÙØ±ÙˆØ¶": ["ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 1", "ÙØ±Ø¶ Ø§Ù„Ø¯ÙˆØ±Ø© 2"]
        }
    }
};
// ØªØ¹Ø±ÙŠÙ Ø§Ù„Ù‚ÙˆØ§Ø¦Ù…
const menus = {
    main: ["Ø¬Ø¯Ø¹ Ù…Ø´ØªØ±Ùƒ", "Ø£ÙˆÙ„Ù‰ Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§", "Ø«Ø§Ù†ÙŠØ© Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§"],
    subjects: {
        "Ø¬Ø¯Ø¹ Ù…Ø´ØªØ±Ùƒ": ["Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡", "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶", "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©", "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ø§Ù„ÙÙ„Ø³ÙØ©"],
        "Ø£ÙˆÙ„Ù‰ Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§": ["Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡", "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶", "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©", "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ø§Ù„ÙÙ„Ø³ÙØ©"],
        "Ø«Ø§Ù†ÙŠØ© Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§": ["Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡", "Ø¹Ù„ÙˆÙ… Ø§Ù„Ø­ÙŠØ§Ø© ÙˆØ§Ù„Ø£Ø±Ø¶", "Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", "Ø§Ù„Ù„ØºØ© Ø§Ù„ÙØ±Ù†Ø³ÙŠØ©", "Ø§Ù„ØªØ±Ø¨ÙŠØ© Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ø§Ù„ÙÙ„Ø³ÙØ©"]
    },
    lessons: {
        "Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡": ["Ø§Ù„Ø¯Ø±Ø³ 1", "Ø§Ù„Ø¯Ø±Ø³ 2", "Ø§Ù„Ø¯Ø±Ø³ 3"],
        "ØªÙ…Ø§Ø±ÙŠÙ†": ["ØªÙ…Ø±ÙŠÙ† 1", "ØªÙ…Ø±ÙŠÙ† 2", "ØªÙ…Ø±ÙŠÙ† 3"]
    }
};

// Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ØªØ±Ø­ÙŠØ¨ ÙˆØ§Ù„Ù‚ÙˆØ§Ø¦Ù…
function getMainMenu() {
    return `Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø¨ÙˆØª Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ! ğŸ‘‹
Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ:
${menus.main.map((level, index) => `${index + 1}. ${level}`).join('\n')}`;
}
function getSubjectsMenu(level) {
    const subjects = menus.subjects[level];
    return `Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©:
${subjects.map((subject, index) => `${index + 1}. ${subject}`).join('\n')}`;
}
function getLessonsMenu(subject) {
    const lessons = menus.lessons[subject];
    return `Ø§Ø®ØªØ± Ø§Ù„Ø¯Ø±Ø³:
${lessons.map((lesson, index) => `${index + 1}. ${lesson}`).join('\n')}`;
}
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
client.on('message', async (message) => {
    const userId = message.from;
    const userState = userStates[userId] || { step: 'start' };
    try {
        if (userState.step === 'start') {
            await message.reply(getMainMenu());
            userStates[userId] = { step: 'awaiting_level' };
            return;
        }
        if (userState.step === 'awaiting_level') {
            const levelIndex = parseInt(message.body) - 1;
            if (levelIndex >= 0 && levelIndex < menus.main.length) {
                const selectedLevel = menus.main[levelIndex];
                userStates[userId] = { 
                    step: 'awaiting_subject',
                    level: selectedLevel
                };
                await message.reply(getSubjectsMenu(selectedLevel));
                return;
            }
        }
        if (userState.step === 'awaiting_subject') {
            const subjectIndex = parseInt(message.body) - 1;
            const subjects = menus.subjects[userState.level];
            
            if (subjectIndex >= 0 && subjectIndex < subjects.length) {
                const selectedSubject = subjects[subjectIndex];
                if (userState.level === 'Ø£ÙˆÙ„Ù‰ Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠØ§' && selectedSubject === 'Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¡ ÙˆØ§Ù„ÙƒÙŠÙ…ÙŠØ§Ø¡') {
                    await message.reply('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¯Ø±ÙˆØ³ Ø§Ùˆ ÙØ±ÙˆØ¶ Ø§Ùˆ ØªÙ…Ø§Ø±ÙŠÙ†ØŸ');
                    userStates[userId] = {
                        step: 'awaiting_type',
                        level: userState.level,
                        subject: selectedSubject
                    };
                    return;
                }
                
                await message.reply('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¯Ø±ÙˆØ³ Ø§Ùˆ ÙØ±ÙˆØ¶ Ø§Ùˆ ØªÙ…Ø§Ø±ÙŠÙ†ØŸ');
                userStates[userId] = {
                    step: 'awaiting_type',
                    level: userState.level,
                    subject: selectedSubject
                };
                return;
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                userStates[userId] = { step: 'start' };
                await message.reply('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ø£Ø®Ø±Ù‰ØŸ Ø£Ø±Ø³Ù„ Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.');
                return;
            }
        }
        if (userState.step === 'awaiting_type') {
            const type = message.body.trim();
            if (type === 'ØªÙ…Ø§Ø±ÙŠÙ†' || type === 'ÙØ±ÙˆØ¶' || type === 'Ø¯Ø±ÙˆØ³') {
                const contentType = type.trim();
                const contentPath = path.join(__dirname, 'pdfs', userState.level, userState.subject, contentType);
                
                if (fs.existsSync(contentPath)) {
                    // If directory is empty, create sample lesson titles
                    const files = fs.readdirSync(contentPath);
                    if (files.length === 0) {
                        const sampleTitles = [
                            'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø£ÙˆÙ„',
                            'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù†ÙŠ',
                            'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø«Ø§Ù„Ø«',
                            'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø±Ø§Ø¨Ø¹',
                            'Ø§Ù„Ø¯Ø±Ø³ Ø§Ù„Ø®Ø§Ù…Ø³'
                        ];
                        const fileList = sampleTitles.map((title, index) => `${index + 1}. ${title}`).join('\n');
                        await message.reply(`Ø§Ø®ØªØ± Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:\n${fileList}`);
                    } else {
                        const fileList = files.map((file, index) => `${index + 1}. ${path.basename(file, '.pdf')}`).join('\n');
                        await message.reply(`Ø§Ø®ØªØ± Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:\n${fileList}`);
                    }
                    userStates[userId] = {
                        step: 'awaiting_file',
                        level: userState.level,
                        subject: userState.subject,
                        contentType: contentType,
                        files: files
                    };
                    return;
                } else {
                    await message.reply('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù„ÙØ§Øª Ù…ØªÙˆÙØ±Ø© Ø­Ø§Ù„ÙŠØ§Ù‹');
                    userStates[userId] = { step: 'start' };
                    return;
                }
                
                try {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù PDF
                    const pdfPath = path.join(__dirname, 'pdfs', userState.level, `${userState.subject}`, `${type}.pdf`);
                    if (fs.existsSync(pdfPath)) {
                        const media = MessageMedia.fromFilePath(pdfPath);
                        await message.reply(media);
                    } else {
                        await message.reply('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹');
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù:', error);
                    await message.reply('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù');
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                userStates[userId] = { step: 'start' };
                await message.reply('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ø£Ø®Ø±Ù‰ØŸ Ø£Ø±Ø³Ù„ Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.');
                return;
            }
        }
        if (userState.step === 'awaiting_file') {
            const fileIndex = parseInt(message.body) - 1;
            if (fileIndex >= 0 && fileIndex < userState.files.length) {
                const selectedFile = userState.files[fileIndex];
                try {
                    // Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù PDF
                    const pdfPath = path.join(__dirname, 'pdfs', userState.level, userState.subject, userState.contentType, selectedFile);
                    if (fs.existsSync(pdfPath)) {
                        const media = MessageMedia.fromFilePath(pdfPath);
                        await message.reply(media);
                    } else {
                        await message.reply('Ø¹Ø°Ø±Ø§Ù‹ØŒ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…ØªÙˆÙØ± Ø­Ø§Ù„ÙŠØ§Ù‹');
                    }
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù:', error);
                    await message.reply('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù…Ù„Ù');
                }
                
                // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
                userStates[userId] = { step: 'start' };
                await message.reply('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø§Ø¯Ø© Ø£Ø®Ø±Ù‰ØŸ Ø£Ø±Ø³Ù„ Ø£ÙŠ Ø±Ø³Ø§Ù„Ø© Ù„Ù„Ø¨Ø¯Ø¡ Ù…Ù† Ø¬Ø¯ÙŠØ¯.');
                return;
            }
        }
        // ÙÙŠ Ø­Ø§Ù„Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø®Ø§Ø·Ø¦
        await message.reply('Ø§Ø®ØªÙŠØ§Ø± ØºÙŠØ± ØµØ­ÙŠØ­. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
        userStates[userId] = { step: 'start' };
        await message.reply(getMainMenu());
    } catch (error) {
        console.error('Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±Ø³Ø§Ù„Ø©:', error);
        await message.reply('Ø­Ø¯Ø« Ø®Ø·Ø£. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    }
});
client.on('auth_failure', msg => {
    console.error('ÙØ´Ù„ ÙÙŠ Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø©:', msg);
});
client.on('qr', (qr) => {
    qrcode.generate(qr, {small: true});
    console.log('ğŸ”„ Ø¨Ø±Ø¬Ø§Ø¡ Ù…Ø³Ø­ Ø±Ù…Ø² QR Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙˆØ§ØªØ³Ø§Ø¨');
});
client.on('ready', () => {
    console.log('âœ… ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø¬Ø§Ø­!');
});
client.initialize().catch(err => {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„:', err);
});
